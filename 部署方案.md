
```shell

make docker_build_device_color_changer
make docker_build_device_color_changer_python

```


```yaml

cat<<EOF | kubectl apply  -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: device-color-changer
spec:
  selector:
    matchLabels:
      app: device-color-changer
  replicas: 1
  template:
    metadata:
      labels:
        app: device-color-changer
    spec:

      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: apps.openyurt.io/nodepool
                    operator: In
                    values:
                      - raspberry
#      imagePullSecrets:
#      - name: tpaas-itg
#      serviceAccountName: jdos-deployer
      containers:
      - name: deployer
        imagePullPolicy: Always
        image: docker.io/huiwq1990/device-color-changer:v0.0.0-a
        command: ["/bin/sh", "-ec", "while :; do echo date; sleep 10 ; done"]
        envFrom:
        - configMapRef:
            name: common-variables

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: device-color-changer-init
spec:
  selector:
    matchLabels:
      app: device-color-changer-init
  replicas: 1
  template:
    metadata:
      labels:
        app: device-color-changer-init
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: apps.openyurt.io/nodepool
                    operator: In
                    values:
                      - raspberry
      #      imagePullSecrets:
      #      - name: tpaas-itg
      containers:
      - name: deployer
        imagePullPolicy: Always
        image: docker.io/huiwq1990/device-color-changer-python:v0.0.0-a
        command: ["/bin/sh", "-ec", "while :; do echo date; sleep 10 ; done"]
        envFrom:
          - configMapRef:
              name: common-variables
EOF




```


```shell
python ./init.py -ip ${EDGEX_CORE_METADATA_PORT_48081_TCP_ADDR} -devip 192.168.68.101



```

./device-color --cp=consul://edgex-core-consul:8500 --registry --confdir=/res

./device-color --cp=consul://edgex-core-consul:8500 --confdir=/res --registry

curl http://edgex-core-consul:8500/v1/status/leader